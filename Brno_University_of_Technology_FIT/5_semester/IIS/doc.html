<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-2"/>
    <title>Projekt IIS</title>
    <style type="text/css">
    	table { border-collapse: collapse; }
    	td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    	dt { font-weight: bold; margin-top: 0.5em; }
    </style>
</head>
<body>

<!-- Zkontrolujte prosím nastavení kódování v hlavièce dokumentu 
     podle pou¾itého editoru -->

<h1>Ordinace praktického lékaøe</h1>

<dl>
	<dt>Autoøi</dt>
	<dd>Jan Ondruch
		<a href="mailto:xondru14@stud.fit.vutbr.cz">xondu14@stud.fit.vutbr.cz</a> -
	v¹e
	</dd>
	<dd>Richard Èinèura
		<a href="mailto:xcincu00@stud.fit.vutbr.cz">xcincu00@stud.fit.vutbr.cz</a> - 
	nic (ukonèil studium)
	</dd>
	<dt>URL aplikace</dt>
	<dd><a href="https://ordinace-praktickeho-lekare.herokuapp.com">https://ordinace-praktickeho-lekare.herokuapp.com</a></dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>
<table>
<tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>admin</td><td>heslo</td><td>Administrátor</td></tr>
<tr><td>lekar</td><td>heslo</td><td>Lékaø</td></tr>
<tr><td>sestra</td><td>heslo</td><td>Sestra</td></tr>
</table>

<h2>Implementace</h2>
<p>Jeliko¾ implementace probìhla s vyu¾itím <i>node.js</i> a "¹ablonovacího" jazyka (templating language) <i>ejs</i>, 
byly jednotlivé èásti aplikace rozdìleny do ¹ablon. Pro login slou¾í napø. ¹ablona <i>login.ejs</i>, pro novou náv¹tìvu pacienta 
<i>visits.ejs</i> apod.. Komunikace mezi backendem programu (<i>node.js</i>) a frontendem (<i>html</i> + <i>ejs</i>) je vyøe¹ená 
právì pomocí <i>ejs</i> a volání <i>AJAX</i>u. Pro organizaci aplikace do mvc modelu byl na backendu vyu¾it framework <i>Express.js</i>. 
Pro ukládání dat byla pou¾ita databáze <i>MySQL</i>, pro jednotlivá sezení u¾ivatelù aplikace vyu¾ívá sessions (sezení). Prevence
proti XSS byla zaji¹tìna balíèkem <i>sanitizer</i>. Mezi dal¹í pomocné nástroje na frontendu patøí <i>Bootstrap</i>, <i>CSS</i> 
a <i>jQuery</i>.
</p>
Bìhem implementace do¹lo k nìkolika úpravám jak v návrhu ER diagramu, tak i v use-case diagramu. V¹echny tyto zmìny napomohly výslednou
aplikaci sestavit tak, jak by v ordinaci skuteènì fungovala.
<br></br>
Návrh databáze (oproti návrhu pøede¹lému) uva¾uje externí vy¹etøení vázána na náv¹tìvu pacienta a ne na pacienta samotného. 
Tato zmìna vyplývá z reálných pøípadù pou¾ití, kdy pacient nejprve dojde k lékaøi, který pacienta po¹le za odborníkem. 
Navíc do¹lo ke zru¹ení tabulky <i>Lékaøský pøípad</i>, která v návrhu nedávala smysl. Pro léky, výkony a poji¹»ovny byly navíc 
pøidány èíselníky, ze kterých mù¾e lékaø nebo sestra vybírat.
<br></br>
Use-case diagram byl pozmìnìn tak, ¾e lékaø faktury nevytváøí manuálnì, ty jsou v¹ak za nìj generovány automaticky pøi ka¾dé náv¹tìvì,
bìhem které byly provedeny nìjaké výkony. Jedna faktura obsahuje souèet èástek výkonù provedených na dané náv¹tìvì. Èástky výkonù
jsou pak obsa¾eny v èíselníku <i>template_executions</i>. Dal¹í zmìna spoèívá v pøesunu akce evidence výkonu a pøedepsaných lékù 
od sestry k lékaøi - tyto akce provádí sám lékaø bìhem náv¹tìvy pacienta (sestøe by tohle umo¾òeno být nemìlo, jeliko¾ nemá 
dostateènou kvalifikaci). Takté¾ plánování oèkování a prohlídek není provádìno zcela automaticky - variabilita pravidelností prohlídek
a oèkování se u ka¾dého pacienta témìø v¾dy li¹í a pacienti si data a èasy vybírají sami (po konzultaci se sestrou). Øe¹ením je tedy
ponechání plánování na sestøe, která po domluvì s pacientem následující prohlídku èi oèkování ulo¾í do systému jako "Naplánovanou
prohlídku / oèkování". Prvotní návrh v use-case diagramu tedy nereflektoval realitu, pravidelné oèkování øízené èasem by dávalo snad 
jen smysl u kojencù, kdy se bìhem prvních mìsícù provádí mnoho oèkování, která se pro jednotlivé dìti neli¹í.
<br></br>
Pokud nastane akutní pøípad u cizího pacienta, je nutno tohoto pacienta nejprve registrovat (funkce vytvoøení nového pacienta). Není
toti¾ mo¾né nìkoho o¹etøovat, ani¾ by o tomto vy¹etøení nebyl nìkde ulo¾en záznam.
<br></br>
Do aplikace bylo pøidáno nìkolik redundantních popiskù a znaèení pro vy¹¹í pøehlednost a rychlej¹í orientaci. 
<p>

<h2>Instalace</h2>
<ul>
<li>Aplikace byla nainstalována s vyu¾itím cloudové platformy (PaaS) Heroku</li>
<li>Instalace byla provedena podle <a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs">tohoto návodu</a></li>
<li>K lokální instalaci je potøeba mít nainstalovaný <i>node.js</i> verze 6 a vy¹¹í (pro ni¾¹í verze není správná funkènost zaruèena)</li>
<li>Dále je potøeba mít nainstalovaný nástroj <i>Heroku</i> a </i>npm</i> verze 5.3+ pro instalaci potøebných modulù a také pro spu¹tìní aplikace</li>
<li>Po konfiguraci v¹ech potøebných knihoven a nástrojù je potøeba moduly nainstalovat pøíkazem <i>npm install</i></li>
<li>Lokální spu¹tìní aplikace se vykoná pøíkazem <i>npm start</i></li>
<li>Aplikace je poté dostupná na <i>localhost:5000</i> (port je mo¾no zmìnit)</li>
<li>MySQL databáze (s formátem úlo¾i¹tì dat <i>InnoDB</i>) je takté¾ spravována skrze Heroku (inicializace, správa, apod.)</li>
</ul>

<h2>Známé problémy</h2>
<p>Aplikace splòuje v¹echny body zadání, pøi testování nebyly odhaleny ¾ádné záva¾né nedostatky.</p>

</body>
</html>
